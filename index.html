<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eventi Storici</title>
  <link rel="stylesheet" href="style.css"> <!-- Collegamento al file CSS esterno -->
</head>
<body>
  <div class="container">
    <h1>Evento Storico del Giorno</h1>
    <p>Data odierna: <span id="dataOdierna"></span></p> <!-- Elemento per visualizzare la data odierna -->
    <div id="evento">
      <!-- Il contenuto verrà caricato dinamicamente qui -->
    </div>
  </div>

  <script>
    // Funzione per ottenere la data odierna nel formato "MM-DD"
    function getDataOdierna() {
      const oggi = new Date();
      const mese = String(oggi.getMonth() + 1).padStart(2, '0');
      const giorno = String(oggi.getDate()).padStart(2, '0');
      return `${mese}-${giorno}`;
    }

    // Funzione per caricare l'evento storico corrispondente al mese e giorno odierni
    function caricareEventoStorico() {
      const dataOdierna = getDataOdierna();

      // Visualizza la data odierna
      document.getElementById('dataOdierna').textContent = dataOdierna;

      // Eseguire una richiesta HTTP GET per ottenere l'evento storico
      fetch(`/api/evento?data=${dataOdierna}`, {
        method: 'GET'
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Errore nel caricamento dell\'evento storico.');
          }
          return response.json();
        })
        .then(data => {
          console.log('Dati ricevuti:', data); // Aggiunto per debug
          const eventoDiv = document.getElementById('evento');
          eventoDiv.textContent = data.evento;
        })
        .catch(error => {
          console.error('Si è verificato un errore:', error);
        });
    }

    // Chiamare la funzione per caricare l'evento storico all'avvio della pagina
    window.onload = caricareEventoStorico;
  </script>
</body>
</html>